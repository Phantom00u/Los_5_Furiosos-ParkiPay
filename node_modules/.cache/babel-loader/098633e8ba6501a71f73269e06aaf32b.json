{"ast":null,"code":"export default async function ajaxLogin() {\n  let correoP = document.getElementsByName(\"correo\")[0].value;\n  let credencialP = document.getElementById(\"contraseña\").value;\n  if (validarDatos(correoP, credencialP)) {\n    const response = await fetch(`http://localhost:3001/api/login?e=${correoP}&p=${credencialP}`);\n    const respJson = await response.json();\n    console.log(JSON.stringify(respJson));\n    if (respJson.success) {\n      document.cookie = \"nombre=\" + respJson.Data[0]['name'] + \";\";\n      document.cookie = \"usuario=\" + respJson.Data[0]['usuario'] + \";\";\n      document.cookie = \"correo=\" + respJson.Data[0]['email'] + \";\";\n      document.cookie = \"telefono=\" + respJson.Data[0]['telephone'] + \";\";\n      document.cookie = \"id=\" + respJson.Data[0]['_id'] + \";\";\n      document.cookie = \"dueño=\" + respJson.Data[0]['dueño'] + \";\";\n      console.log(decodeURIComponent(document.cookie));\n      window.location.href = \"/\";\n      alert(\"Sesión iniciada correctamente\");\n      return;\n    } else alert(\"Usuario no encontrado\");\n  }\n}\nfunction validarDatos(correoP, credencialP) {\n  let errores = 0;\n  let txt = \"\";\n  let regexNombreYCredencial = /^[a-zA-ZñÑ0-9¿?¡!@#$%&]*$/;\n  if (credencialP == \"\") {\n    txt = txt + \"La contraseña está vacía.\\n\";\n    errores++;\n  } else {\n    if (!regexNombreYCredencial.test(credencialP)) {\n      txt = txt + \"La contraseña solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\";\n      errores++;\n    }\n    if (credencialP.length > 30) {\n      txt = txt + \"La contraseña no puede tener más de 30 caracteres.\\n\";\n      errores++;\n    }\n  }\n  if (correoP == \"\") {\n    txt = txt + \"El correo está vacío.\\n\";\n    errores++;\n  } else {\n    let regexCorreo = /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/;\n    if (!regexCorreo.test(correoP)) {\n      txt = txt + \"El correo ingreado es incorrecto.\\n\";\n      errores++;\n    }\n  }\n  if (errores == 0) return true;else {\n    alert(txt);\n    return false;\n  }\n}","map":{"version":3,"names":["ajaxLogin","correoP","document","getElementsByName","value","credencialP","getElementById","validarDatos","response","fetch","respJson","json","console","log","JSON","stringify","success","cookie","Data","decodeURIComponent","window","location","href","alert","errores","txt","regexNombreYCredencial","test","length","regexCorreo"],"sources":["D:/Cositos/Proyects/ChiriWeb/src/Funciones/Login_Usuario.js"],"sourcesContent":["export default async function ajaxLogin(){\r\n    let correoP = document.getElementsByName(\"correo\")[0].value;\r\n    let credencialP = document.getElementById(\"contraseña\").value;\r\n    if(validarDatos(correoP,credencialP)){\r\n        const response = await fetch(`http://localhost:3001/api/login?e=${correoP}&p=${credencialP}`);\r\n        const respJson = await response.json();\r\n        console.log(JSON.stringify(respJson));\r\n        if (respJson.success) {\r\n            document.cookie = \"nombre=\" + respJson.Data[0]['name'] + \";\";\r\n            document.cookie = \"usuario=\" + respJson.Data[0]['usuario'] + \";\";\r\n            document.cookie = \"correo=\" + respJson.Data[0]['email'] + \";\";\r\n            document.cookie = \"telefono=\" + respJson.Data[0]['telephone']+ \";\";\r\n            document.cookie = \"id=\" + respJson.Data[0]['_id'] + \";\";\r\n            document.cookie = \"dueño=\" + respJson.Data[0]['dueño'] + \";\";\r\n            console.log(decodeURIComponent(document.cookie));\r\n            window.location.href = \"/\";\r\n            \r\n            alert(\"Sesión iniciada correctamente\");\r\n            return;\r\n        }else\r\n            alert(\"Usuario no encontrado\");\r\n    }\r\n }\r\n\r\n function validarDatos(correoP, credencialP){\r\n    let errores = 0;\r\n    let txt = \"\";\r\n    let regexNombreYCredencial = /^[a-zA-ZñÑ0-9¿?¡!@#$%&]*$/;\r\n    if(credencialP ==\"\"){\r\n        txt = txt + \"La contraseña está vacía.\\n\";\r\n        errores++;\r\n    }else{\r\n        if(!regexNombreYCredencial.test(credencialP)){\r\n            txt = txt + \"La contraseña solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\"\r\n            errores++;\r\n        }\r\n        if(credencialP.length > 30){\r\n            txt = txt + \"La contraseña no puede tener más de 30 caracteres.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n\r\n    if(correoP ==\"\"){\r\n        txt = txt + \"El correo está vacío.\\n\";\r\n        errores++;\r\n    }else{\r\n        let regexCorreo = /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/;\r\n        if(!regexCorreo.test(correoP)){\r\n            txt = txt + \"El correo ingreado es incorrecto.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n    if (errores == 0)\r\n        return true;\r\n    else{\r\n        alert(txt)\r\n        return false;\r\n    }\r\n }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}