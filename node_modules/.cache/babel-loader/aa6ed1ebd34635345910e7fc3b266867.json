{"ast":null,"code":"import axios from \"axios\";\nexport default async function ajaxRegistroUsuario() {\n  let nombreP = document.getElementsByName(\"name_user\")[0].value;\n  let usuarioP = document.getElementsByName(\"username_user\")[0].value;\n  let correoP = document.getElementsByName(\"email_user\")[0].value;\n  let telefonoP = document.getElementsByName(\"tel_user\")[0].value;\n  let credencialP = document.getElementsByName(\"pssw_user\")[0].value;\n  if (validarDatos(nombreP, usuarioP, correoP, telefonoP, credencialP)) {\n    var body = {\n      nombre: nombreP,\n      usuario: usuarioP,\n      correo: correoP,\n      telefono: telefonoP,\n      credencial: credencialP,\n      activo: true\n    };\n    const res = await axios.post(\"http://localhost:3001/api/signin\", {\n      name,\n      username,\n      email,\n      telephone,\n      password\n    });\n    console.log(JSON.stringify(body));\n    alert(\"\");\n    const response = await fetch(`http://localhost:3001/api/signin`, {\n      method: 'POST',\n      body: JSON.stringify(body)\n    });\n    const respJson = await response.json();\n    console.log(JSON.stringify(respJson));\n    alert(\"\");\n    console.log(respJson);\n    if (respJson.success) {\n      document.cookie = \"nombre=\" + respJson.Data[0]['name'] + \";\" + \"correo=\" + respJson.Data[0]['email'] + \";\" + \"telefono=\" + respJson.Data[0]['telephone'] + \";\" + \"id=\" + respJson.Data[0]['id'] + \";\";\n      alert(\"Sesión iniciada correctamente\");\n      window.location.href = \"/\";\n      return;\n    } else {\n      alert(\"Usuario no encontrado\");\n    }\n  }\n}\nfunction validarDatos(nombreP, usuarioP, correoP, telefonoP, credencialP) {\n  let errores = 0;\n  let txt = \"\";\n  if (nombreP == \"\") {\n    txt = txt + \"El nombre está vacío.\\n\";\n    errores++;\n  } else {\n    let regexNombre = /^[a-zA-Z\\sñÁÉÍÓÚáéíóúàèìòùÀÈÌÒÙ]*$/;\n    if (!regexNombre.test(nombreP)) {\n      txt = txt + \"El nombre solo puede contener letras.\\n\";\n      errores++;\n    }\n    if (nombreP.length > 100) {\n      txt = txt + \"El nombre no puede tener más de 100 caracteres.\\n\";\n      errores++;\n    }\n  }\n  let regexNombreYCredencial = /^[a-zA-ZñÑ0-9¿?¡!@#$%&]*$/;\n  if (usuarioP == \"\") {\n    txt = txt + \"El usuario está vacío.\\n\";\n    errores++;\n  } else {\n    if (!regexNombreYCredencial.test(usuarioP)) {\n      txt = txt + \"El usuario solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\";\n      errores++;\n    }\n    if (usuarioP.length > 30) {\n      txt = txt + \"El usuario no puede tener más de 30 caracteres.\\n\";\n      errores++;\n    }\n  }\n  if (credencialP == \"\") {\n    txt = txt + \"La contraseña está vacía.\\n\";\n    errores++;\n  } else {\n    if (!regexNombreYCredencial.test(credencialP)) {\n      txt = txt + \"La contraseña solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\";\n      errores++;\n    }\n    if (credencialP.length > 30) {\n      txt = txt + \"La contraseña no puede tener más de 30 caracteres.\\n\";\n      errores++;\n    }\n  }\n  if (telefonoP == \"\") {\n    txt = txt + \"El campo de telefono está vacío.\\n\";\n    errores++;\n  } else {\n    let regexTelefono = /^[0-9]*$/;\n    if (!regexTelefono.test(telefonoP)) {\n      txt = txt + \"El telefono solo puede contener numeros.\\n\";\n      errores++;\n    }\n    if (telefonoP.length != 10) {\n      txt = txt + \"El telefono debe tener 10 caracteres.\\n\";\n      errores++;\n    }\n  }\n  if (correoP == \"\") {\n    txt = txt + \"El correo está vacío.\\n\";\n    errores++;\n  } else {\n    let regexCorreo = /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/;\n    if (!regexCorreo.test(correoP)) {\n      txt = txt + \"El correo ingreado es incorrecto.\\n\";\n      errores++;\n    }\n  }\n  if (errores == 0) return true;else {\n    alert(txt);\n    return false;\n  }\n}","map":{"version":3,"names":["axios","ajaxRegistroUsuario","nombreP","document","getElementsByName","value","usuarioP","correoP","telefonoP","credencialP","validarDatos","body","nombre","usuario","correo","telefono","credencial","activo","res","post","name","username","email","telephone","password","console","log","JSON","stringify","alert","response","fetch","method","respJson","json","success","cookie","Data","window","location","href","errores","txt","regexNombre","test","length","regexNombreYCredencial","regexTelefono","regexCorreo"],"sources":["C:/Users/Spicy/Documents/GitHub/Los_5_Furiosos-ParkiPay/src/Funciones/Crear_Usuario.js"],"sourcesContent":[" \r\nimport axios from \"axios\"\r\n\r\nexport default async function ajaxRegistroUsuario(){\r\n    let nombreP = document.getElementsByName(\"name_user\")[0].value;\r\n    let usuarioP = document.getElementsByName(\"username_user\")[0].value;\r\n    let correoP = document.getElementsByName(\"email_user\")[0].value;\r\n    let telefonoP = document.getElementsByName(\"tel_user\")[0].value;\r\n    let credencialP = document.getElementsByName(\"pssw_user\")[0].value;\r\n    \r\n    if(validarDatos(nombreP,usuarioP,correoP,telefonoP,credencialP)){\r\n        var body = {\r\n            nombre: nombreP,\r\n            usuario: usuarioP,\r\n            correo: correoP,\r\n            telefono: telefonoP,\r\n            credencial: credencialP,\r\n            activo: true\r\n        }\r\n        const res = await axios.post(\"http://localhost:3001/api/signin\", {\r\n            name,\r\n            username,\r\n            email,\r\n            telephone,\r\n            password\r\n        });\r\n        console.log(JSON.stringify(body));\r\n        alert(\"\");\r\n        const response = await fetch(`http://localhost:3001/api/signin`,\r\n            {\r\n              method: 'POST',\r\n              body: JSON.stringify(body),\r\n            }\r\n        );\r\n        \r\n        const respJson = await response.json();\r\n        console.log(JSON.stringify(respJson));\r\n        alert(\"\");\r\n        console.log(respJson);\r\n        if (respJson.success) {\r\n            document.cookie = \"nombre=\" + respJson.Data[0]['name'] + \";\" + \"correo=\" + respJson.Data[0]['email'] + \";\" + \"telefono=\" + respJson.Data[0]['telephone']+ \";\" + \"id=\" + respJson.Data[0]['id'] + \";\";\r\n            alert(\"Sesión iniciada correctamente\");\r\n            window.location.href = \"/\";\r\n            return;\r\n        }else{\r\n            alert(\"Usuario no encontrado\");\r\n        }\r\n    } \r\n }\r\n\r\n function validarDatos(nombreP, usuarioP, correoP, telefonoP, credencialP){\r\n    let errores = 0;\r\n    let txt = \"\";\r\n    if(nombreP ==\"\"){\r\n        txt = txt + \"El nombre está vacío.\\n\";\r\n        errores++;\r\n    }else{\r\n        let regexNombre = /^[a-zA-Z\\sñÁÉÍÓÚáéíóúàèìòùÀÈÌÒÙ]*$/;\r\n        if(!regexNombre.test(nombreP)){\r\n            txt = txt + \"El nombre solo puede contener letras.\\n\"\r\n            errores++;\r\n        }\r\n        if(nombreP.length > 100){\r\n            txt = txt + \"El nombre no puede tener más de 100 caracteres.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n    let regexNombreYCredencial = /^[a-zA-ZñÑ0-9¿?¡!@#$%&]*$/;\r\n    if(usuarioP ==\"\"){\r\n        txt = txt + \"El usuario está vacío.\\n\";\r\n        errores++;\r\n    }else{  \r\n        if(!regexNombreYCredencial.test(usuarioP)){\r\n            txt = txt + \"El usuario solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\"\r\n            errores++;\r\n        }\r\n        if(usuarioP.length > 30){\r\n            txt = txt + \"El usuario no puede tener más de 30 caracteres.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n    if(credencialP ==\"\"){\r\n        txt = txt + \"La contraseña está vacía.\\n\";\r\n        errores++;\r\n    }else{  \r\n        if(!regexNombreYCredencial.test(credencialP)){\r\n            txt = txt + \"La contraseña solo puede contener letras, numeros o los siguientes simbolos ¿?¡!@#$%&.\\n\"\r\n            errores++;\r\n        }\r\n        if(credencialP.length > 30){\r\n            txt = txt + \"La contraseña no puede tener más de 30 caracteres.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n    if(telefonoP ==\"\"){\r\n        txt = txt + \"El campo de telefono está vacío.\\n\";\r\n        errores++;\r\n    }else{\r\n        let regexTelefono = /^[0-9]*$/;\r\n        if(!regexTelefono.test(telefonoP)){\r\n            txt = txt + \"El telefono solo puede contener numeros.\\n\"\r\n            errores++;\r\n        }\r\n        if(telefonoP.length != 10){\r\n            txt = txt + \"El telefono debe tener 10 caracteres.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n    \r\n    if(correoP ==\"\"){\r\n        txt = txt + \"El correo está vacío.\\n\";\r\n        errores++;\r\n    }else{\r\n        let regexCorreo = /^[^@]+@[^@]+\\.[a-zA-Z]{2,}$/;\r\n        if(!regexCorreo.test(correoP)){\r\n            txt = txt + \"El correo ingreado es incorrecto.\\n\"\r\n            errores++;\r\n        }\r\n    }\r\n\r\n    if (errores == 0)\r\n        return true;\r\n    else{\r\n        alert(txt)\r\n        return false;\r\n    }\r\n }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}