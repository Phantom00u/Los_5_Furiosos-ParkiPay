{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\52818\\\\Desktop\\\\Repositorio Git web2\\\\PrograWeb2\\\\src\\\\components\\\\forms\\\\Form_reservar.js\",\n  _s = $RefreshSig$();\nimport styled from 'styled-components';\nimport { useHistory } from 'react-router-dom';\nimport $ from 'jquery';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function Form_reservar(props) {\n  _s();\n  /*const  submitHandler = async(e) =>{\r\n    }*/\n\n  const history = useHistory();\n  async function submitHandler(e) {\n    e.preventDefault();\n    const hourPrice = $('#hora').val();\n\n    // For todays date;\n    Date.prototype.today = function () {\n      return this.getFullYear() + \"-\" + (this.getMonth() + 1 < 10 ? \"0\" : \"\") + (this.getMonth() + 1) + \"-\" + (this.getDate() < 10 ? \"0\" : \"\") + this.getDate();\n      //return ((this.getDate() < 10)?\"0\":\"\") + this.getDate() +\"-\"+(((this.getMonth()+1) < 10)?\"0\":\"\") + (this.getMonth()+1) +\"-\"+ this.getFullYear();\n    };\n\n    // For the time now\n    Date.prototype.timeNow = function () {\n      return (this.getHours() < 10 ? \"0\" : \"\") + this.getHours() + \":\" + (this.getMinutes() < 10 ? \"0\" : \"\") + this.getMinutes();\n    };\n    var datetime = new Date().today() + \"T\" + new Date().timeNow();\n\n    //To Unix time\n    var d1 = Date.parse(datetime);\n    var d2 = Date.parse(hourPrice);\n    if (hourPrice === '') {\n      alert('Favor de rellenar los campos faltantes');\n    } else if (d2 < d1) {\n      alert('No puedes agendar una cita en una fecha anterior a la de ahora');\n    } else {\n      const body = {\n        idUser: props.idUser,\n        idEstablecimiento: props.establecimientoID,\n        establecimiento: props.name,\n        parkinglot: props.parkinglots.toString,\n        cost: props.hourPrice,\n        arrivingTime: hourPrice,\n        activo: true\n      };\n      console.log(body);\n      const response = await fetch(`http://localhost:3001/api/reserve`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(body)\n      });\n      const respJson = await response.json();\n      console.log(respJson);\n      history.push(\"/ver_reservas\");\n    }\n  }\n  console.log(props);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Reservacion, {\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"p-aviso\",\n          children: \"Haz tu reservaci\\xF3n f\\xE1cil y r\\xE1pido.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Hora de inicio\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"hora\",\n            type: \"datetime-local\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-flex\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Tarifa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [props.hourPrice, \"$\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Crear Reservacion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Form_reservar, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n});\n_c = Form_reservar;\nconst Reservacion = styled.div`\n  .box-flex {\n    display: flex;\n    padding-top: 5px;\n    padding-bottom: 5px;\n  }\n  .p-aviso {\n    margin: 0px;\n    padding: 5px;\n    font-weight: bold;\n  }\n\n  p {\n    padding: 5px;\n    margin-left: 0px;\n  }\n`;\n/*const Boton = styled.div`\r\n  float: right;\r\n  width: fit-content;\r\n  background-color: rgb(201, 36, 36);\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  padding-left: 2vw;\r\n  padding-right: 2vw;\r\n  margin-top: 15px;\r\n  border-radius: 5px;\r\n  border-color: transparent;\r\n  color: rgb(236, 242, 247);\r\n  font-family: Herculanum, 'Eras Light ITC', sans-serif;\r\n\r\n  &:hover {\r\n    background-color: rgb(168, 30, 30);\r\n  }\r\n`;*/\n_c2 = Reservacion;\nvar _c, _c2;\n$RefreshReg$(_c, \"Form_reservar\");\n$RefreshReg$(_c2, \"Reservacion\");","map":{"version":3,"names":["styled","useHistory","$","Form_reservar","props","history","submitHandler","e","preventDefault","hourPrice","val","Date","prototype","today","getFullYear","getMonth","getDate","timeNow","getHours","getMinutes","datetime","d1","parse","d2","alert","body","idUser","idEstablecimiento","establecimientoID","establecimiento","name","parkinglot","parkinglots","toString","cost","arrivingTime","activo","console","log","response","fetch","method","headers","JSON","stringify","respJson","json","push","Reservacion","div"],"sources":["C:/Users/52818/Desktop/Repositorio Git web2/PrograWeb2/src/components/forms/Form_reservar.js"],"sourcesContent":["import styled from 'styled-components';\r\nimport { useHistory   } from 'react-router-dom';\r\nimport $ from 'jquery';\r\nexport function Form_reservar(props) {\r\n\r\n  /*const  submitHandler = async(e) =>{\r\n\r\n  }*/\r\n\r\n  const history = useHistory();\r\n  async function submitHandler(e) {\r\n    e.preventDefault();\r\n    const hourPrice = $('#hora').val();\r\n  \r\n    // For todays date;\r\n  Date.prototype.today = function () { \r\n  \r\n    return this.getFullYear() +\"-\"+(((this.getMonth()+1) < 10)?\"0\":\"\") + (this.getMonth()+1) +\"-\"+((this.getDate() < 10)?\"0\":\"\") + this.getDate();\r\n    //return ((this.getDate() < 10)?\"0\":\"\") + this.getDate() +\"-\"+(((this.getMonth()+1) < 10)?\"0\":\"\") + (this.getMonth()+1) +\"-\"+ this.getFullYear();\r\n  }\r\n\r\n  // For the time now\r\n  Date.prototype.timeNow = function () {\r\n   return ((this.getHours() < 10)?\"0\":\"\") + this.getHours() +\":\"+ ((this.getMinutes() < 10)?\"0\":\"\") + this.getMinutes();\r\n  }\r\n\r\n  var datetime = new Date().today() + \"T\" + new Date().timeNow();\r\n  \r\n  //To Unix time\r\n  var d1 = Date.parse(datetime)\r\n  var d2 = Date.parse(hourPrice)\r\n  \r\n    if ( hourPrice === '') {\r\n      alert('Favor de rellenar los campos faltantes');\r\n    } else if(d2 < d1) {\r\n      alert('No puedes agendar una cita en una fecha anterior a la de ahora');\r\n    } else {\r\n      const body = {\r\n        idUser : props.idUser,\r\n        idEstablecimiento : props.establecimientoID,\r\n        establecimiento : props.name,\r\n        parkinglot : props.parkinglots.toString,\r\n        cost: props.hourPrice,\r\n        arrivingTime: hourPrice,\r\n        activo : true\r\n      };\r\n      console.log(body);\r\n\r\n      const response = await fetch(\r\n        `http://localhost:3001/api/reserve`,\r\n        {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(body),\r\n        }\r\n      );\r\n      const respJson = await response.json();\r\n      console.log(respJson);\r\n      history.push(\"/ver_reservas\");\r\n        \r\n    }\r\n\r\n  }\r\n\r\n\r\n  console.log(props)\r\n\r\n  return (\r\n    <>\r\n      <Reservacion>\r\n      <form onSubmit={submitHandler}>\r\n        <p className=\"p-aviso\">Haz tu reservación fácil y rápido.</p>\r\n        <div className=\"box-flex\">\r\n          <p>Hora de inicio</p>\r\n          <input id=\"hora\" type=\"datetime-local\"></input>\r\n        </div>\r\n        <div className=\"box-flex\">\r\n          <p>Tarifa</p>\r\n          <p>{props.hourPrice}$</p>\r\n        </div>\r\n        <input type=\"submit\" value=\"Crear Reservacion\"></input>\r\n          </form>\r\n      </Reservacion>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Reservacion = styled.div`\r\n  .box-flex {\r\n    display: flex;\r\n    padding-top: 5px;\r\n    padding-bottom: 5px;\r\n  }\r\n  .p-aviso {\r\n    margin: 0px;\r\n    padding: 5px;\r\n    font-weight: bold;\r\n  }\r\n\r\n  p {\r\n    padding: 5px;\r\n    margin-left: 0px;\r\n  }\r\n`;\r\n/*const Boton = styled.div`\r\n  float: right;\r\n  width: fit-content;\r\n  background-color: rgb(201, 36, 36);\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  padding-left: 2vw;\r\n  padding-right: 2vw;\r\n  margin-top: 15px;\r\n  border-radius: 5px;\r\n  border-color: transparent;\r\n  color: rgb(236, 242, 247);\r\n  font-family: Herculanum, 'Eras Light ITC', sans-serif;\r\n\r\n  &:hover {\r\n    background-color: rgb(168, 30, 30);\r\n  }\r\n`;*/\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}